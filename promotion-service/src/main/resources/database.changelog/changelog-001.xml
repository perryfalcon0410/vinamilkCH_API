<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.8.xsd
        http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd">

    <changeSet id="2021-03-23-create-tables-for-voucher-services" author="thaitt">
        <createTable tableName="VOUCHER_PROGRAM">
            <column name="ID" type="bigint" autoIncrement="true">
                <constraints primaryKey="true"/>
            </column>
            <column name="VOUCHER_PROGRAM_CODE" type="varchar(100)">
                <constraints unique="true" />
            </column>
            <column name="VOUCHER_PROGRAM_NAME" type="varchar(200)"/>
            <column name="FROM_DATE" type="date"/>
            <column name="TO_DATE" type="date"/>
            <column name="STATUS" type="int" defaultOnNull="0">
                <constraints nullable="false"/>
            </column>
            <column name="OBJECT_NAME" type="varchar(200)"/>

            <column name="CREATED_AT" type="datetime"/>
            <column name="UPDATED_AT" type="datetime"/>
            <column name="DELETED_AT" type="datetime"/>

        </createTable>

        <createTable tableName="VOUCHERS">
            <column name="ID" type="bigint" autoIncrement="true">
                <constraints primaryKey="true"/>
            </column>
            <column name="VOUCHER_CODE" type="varchar(100)" >
                <constraints unique="true"/>
            </column>
            <column name="VOUCHER_NAME" type="varchar(500)"/>
            <column name="VOUCHER_PROGRAM_ID" type="bigint"/>
            <column name="SERIAL" type="varchar(50)"/>
            <column name="PRICE" type="float"/>
            <column name="SHOP_ID" type="bigint"/>
            <column name="STATUS" type="int" defaultOnNull="0">
                <constraints nullable="false"/>
            </column>
            <column name="CUSTOMER_TYPE_ID" type="bigint"/>
            <column name="CUSTOMER_TYPE_CODE" type="varchar(50)"/>
            <column name="CUSTOMER_ID" type="bigint"/>
            <column name="CHANGE_DATE" type="date"/>
            <column name="CHANGE_USER" type="varchar(50)"/>
            <column name="ACTIVATED" type="tinyint"/>
            <column name="ACTIVATED_DATE" type="date"/>
            <column name="ACTIVATED_USER" type="varchar(50)"/>
            <column name="IS_USED" type="tinyint"/>
            <column name="SALE_ORDER_ID" type="bigint"/>
            <column name="ORDER_NUMBER" type="varchar(100)"/>
            <column name="PRICE_USED" type="float"/>
            <column name="ORDER_CUSTOMER_CODE" type="varchar(100)"/>
            <column name="ORDER_AMOUNT" type="float"/>
            <column name="ORDER_SHOP_CODE" type="varchar(50)"/>
            <column name="ORDER_DATE" type="date"/>
            <column name="PAYMENT_STATUS" type="int" defaultOnNull="0">
                <constraints nullable="false"/>
            </column>
            <column name="UPDATE_USER" type="varchar(50)"/>

            <column name="CREATED_AT" type="datetime"/>
            <column name="UPDATED_AT" type="datetime"/>
            <column name="DELETED_AT" type="datetime"/>

        </createTable>

        <createTable tableName="VOUCHER_CUSTOMER_MAP">
            <column name="ID" type="bigint" autoIncrement="true">
                <constraints primaryKey="true"/>
            </column>
            <column name="VOUCHER_PROGRAM_ID" type="bigint"/>
            <column name="CUSTOMER_TYPE_ID" type="bigint"/>
            <column name="CUSTOMER_TYPE_CODE" type="varchar(40)"/>
            <column name="STATUS" type="int" defaultOnNull="0">
                <constraints nullable="false"/>
            </column>

            <column name="CREATED_AT" type="datetime"/>
            <column name="UPDATED_AT" type="datetime"/>
            <column name="DELETED_AT" type="datetime"/>

        </createTable>

        <createTable tableName="VOUCHER_SHOP_MAP">
            <column name="ID" type="bigint" autoIncrement="true">
                <constraints primaryKey="true"/>
            </column>
            <column name="VOUCHER_PROGRAM_ID" type="bigint"/>
            <column name="SHOP_ID" type="bigint"/>
            <column name="STATUS" type="int" defaultOnNull="0">
                <constraints nullable="false"/>
            </column>

            <column name="CREATED_AT" type="datetime"/>
            <column name="UPDATED_AT" type="datetime"/>
            <column name="DELETED_AT" type="datetime"/>

        </createTable>

        <createTable tableName="VOUCHER_SALE_PRODUCT">
            <column name="ID" type="bigint" autoIncrement="true">
                <constraints primaryKey="true"/>
            </column>
            <column name="VOUCHER_PROGRAM_ID" type="bigint"/>
            <column name="PRODUCT_ID" type="bigint"/>
            <column name="STATUS" type="int" defaultOnNull="0">
                <constraints nullable="false"/>
            </column>

            <column name="CREATED_AT" type="datetime"/>
            <column name="UPDATED_AT" type="datetime"/>
            <column name="DELETED_AT" type="datetime"/>
        </createTable>

        <rollback>
            <dropTable tableName="VOUCHER_PROGRAMS"/>
            <dropTable tableName="VOUCHERS"/>
            <dropTable tableName="VOUCHER_CUSTOMER_MAP"/>
            <dropTable tableName="VOUCHER_SHOP_MAP"/>
            <dropTable tableName="VOUCHER_SALE_PRODUCT"/>
        </rollback>
    </changeSet>

    <changeSet id="2021-03-23-create-tables-for-member-services" author="thaitt">

        <createTable tableName="MEMBER_CARD">
            <column name="ID" type="bigint" autoIncrement="true">
                <constraints primaryKey="true"/>
            </column>
            <column name="MEMBER_CARD_CODE" type="varchar(100)">
                <constraints unique="true" />
            </column>
            <column name="MEMBER_CARD_NAME" type="nvarchar(500)"/>
            <column name="CUSTOMER_TYPE_ID" type="bigint"/>
            <column name="LEVEL_CARD" type="bigint"/>
            <column name="STATUS" type="int" defaultOnNull="0">
                <constraints nullable="false"/>
            </column>

            <column name="CREATED_AT" type="datetime"/>
            <column name="UPDATED_AT" type="datetime"/>
            <column name="DELETED_AT" type="datetime"/>

        </createTable>

        <createTable tableName="MEMBER_CUSTOMER">
            <column name="ID" type="bigint" autoIncrement="true">
                <constraints primaryKey="true"/>
            </column>
            <column name="MEMBER_CARD_ID" type="bigint"/>
            <column name="CUSTOMER_ID" type="bigint"/>
            <column name="SCORE_CUMULATED" type="bigint"/>
            <column name="ISSUE_DATE" type="date"/>
            <column name="AMOUNT" type="float"/>
            <column name="SHOP_ID" type="bigint"/>
            <column name="RPT_DATE" type="date"/>
            <column name="IS_ASSIGN" type="tinyint"/>
            <column name="TOTAL_SCORE" type="int"/>
            <column name="UPDATE_USER" type="varchar(50)"/>

            <column name="CREATED_AT" type="datetime"/>
            <column name="UPDATED_AT" type="datetime"/>
            <column name="DELETED_AT" type="datetime"/>
        </createTable>

        <createTable tableName="MEMBER_PRODUCT_APPLY">
            <column name="ID" type="bigint" autoIncrement="true">
                <constraints primaryKey="true"/>
            </column>
            <column name="MEMBER_CARD_ID" type="bigint"/>
            <column name="OBJECT_TYPE" type="int"/>
            <column name="OBJECT_ID" type="bigint"/>
            <column name="FROM_DATE" type="date"/>
            <column name="TO_DATE" type="date"/>
            <column name="STATUS" type="int" defaultOnNull="0">
                <constraints nullable="false"/>
            </column>
            <column name="FACTOR" type="float"/>

            <column name="CREATED_AT" type="datetime"/>
            <column name="UPDATED_AT" type="datetime"/>
            <column name="DELETED_AT" type="datetime"/>
        </createTable>

        <createTable tableName="MEMBER_REGULATION">
            <column name="ID" type="bigint" autoIncrement="true">
                <constraints primaryKey="true"/>
            </column>
            <column name="MEMBER_CARD_ID" type="bigint"/>
            <column name="TYPE" type="int"/>
            <column name="AMOUNT" type="float"/>
            <column name="NUM_DATE" type="int"/>
            <column name="FROM_DATE" type="date"/>
            <column name="TO_DATE" type="date"/>
            <column name="STATUS" type="int" defaultOnNull="0">
                <constraints nullable="false"/>
            </column>

            <column name="CREATED_AT" type="datetime"/>
            <column name="UPDATED_AT" type="datetime"/>
            <column name="DELETED_AT" type="datetime"/>
        </createTable>

        <createTable tableName="MEMBER_SCORE_CONVERT">
            <column name="ID" type="bigint" autoIncrement="true">
                <constraints primaryKey="true"/>
            </column>
            <column name="MEMBER_CARD_ID" type="bigint"/>
            <column name="TYPE" type="int"/>
            <column name="AMOUNT" type="float"/>
            <column name="SCORE" type="int"/>
            <column name="FROM_DATE" type="date"/>
            <column name="TO_DATE" type="date"/>
            <column name="STATUS" type="int" defaultOnNull="0">
                <constraints nullable="false"/>
            </column>

            <column name="CREATED_AT" type="datetime"/>
            <column name="UPDATED_AT" type="datetime"/>
            <column name="DELETED_AT" type="datetime"/>
        </createTable>

        <createTable tableName="RPT_CUS_MEM_AMOUNT">
            <column name="ID" type="bigint" autoIncrement="true">
                <constraints primaryKey="true"/>
            </column>
            <column name="CUSTOMER_TYPE_ID" type="bigint"/>
            <column name="MEMBER_CARD_ID" type="bigint"/>
            <column name="FROM_DATE" type="date"/>
            <column name="CUST_SHOP_ID" type="bigint"/>
            <column name="CUSTOMER_ID" type="bigint"/>
            <column name="QUANTITY" type="int"/>
            <column name="AMOUNT" type="float"/>
            <column name="SCORE" type="int"/>
            <column name="STATUS" type="int" defaultOnNull="0">
                <constraints nullable="false"/>
            </column>
            <column name="RPT_DATE" type="date"/>

            <column name="CREATED_AT" type="datetime"/>
            <column name="UPDATED_AT" type="datetime"/>
            <column name="DELETED_AT" type="datetime"/>
        </createTable>

        <rollback>
            <dropTable tableName="MEMBER_CARD"/>
            <dropTable tableName="MEMBER_CUSTOMER"/>
            <dropTable tableName="MEMBER_PRODUCT_APPLY"/>
            <dropTable tableName="MEMBER_REGULATION"/>
            <dropTable tableName="MEMBER_SCORE_CONVERT"/>
            <dropTable tableName="RPT_CUS_MEM_AMOUNT"/>
        </rollback>
    </changeSet>

</databaseChangeLog>